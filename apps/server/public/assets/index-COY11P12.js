import{r as a,a as B,R as z}from"./vendor-nf7bT_Uh.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function f(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(l){if(l.ep)return;l.ep=!0;const c=f(l);fetch(l.href,c)}})();var j={exports:{}},g={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O=a,_=Symbol.for("react.element"),E=Symbol.for("react.fragment"),T=Object.prototype.hasOwnProperty,G=O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N={key:!0,ref:!0,__self:!0,__source:!0};function w(e,o,f){var n,l={},c=null,p=null;f!==void 0&&(c=""+f),o.key!==void 0&&(c=""+o.key),o.ref!==void 0&&(p=o.ref);for(n in o)T.call(o,n)&&!N.hasOwnProperty(n)&&(l[n]=o[n]);if(e&&e.defaultProps)for(n in o=e.defaultProps,o)l[n]===void 0&&(l[n]=o[n]);return{$$typeof:_,type:e,key:c,ref:p,props:l,_owner:G.current}}g.Fragment=E;g.jsx=w;g.jsxs=w;j.exports=g;var r=j.exports,x={},v=B;x.createRoot=v.createRoot,x.hydrateRoot=v.hydrateRoot;function U(e,o,f=[]){const n=a.useRef(null),l=a.useCallback((...c)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{e(...c)},o)},[e,o,...f]);return a.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]),l}const W=()=>{const[e,o]=a.useState({selectedFile:null,fidelity:50,whiteFill:!1,useAI:!1,isProcessing:!1,result:null,error:null,svgPreview:null}),f=a.useRef(null),n=a.useRef(null),l=U(async(i,s,d,u)=>{if(i){o(m=>({...m,isProcessing:!0,error:null}));try{const m=new FormData;m.append("image",i),m.append("fidelity",s.toString()),m.append("whiteFill",d.toString()),m.append("useAI",u.toString());const h=await fetch("/api/trace",{method:"POST",body:m});if(!h.ok){const y=await h.json();throw new Error(y.error||"Processing failed")}const b=await h.json();o(y=>({...y,result:b,svgPreview:b.svg,isProcessing:!1,error:null}))}catch(m){console.error("Trace processing error:",m),o(h=>({...h,error:m instanceof Error?m.message:"Unknown error occurred",isProcessing:!1}))}}},500,[e.selectedFile,e.fidelity,e.whiteFill,e.useAI]),c=a.useCallback(i=>{if(!i.type.startsWith("image/png")){o(s=>({...s,error:"Please select a PNG file"}));return}o(s=>({...s,selectedFile:i,error:null,result:null,svgPreview:null})),l(i,e.fidelity,e.whiteFill,e.useAI)},[e.fidelity,e.whiteFill,e.useAI,l]),p=a.useCallback(i=>{var d;const s=(d=i.target.files)==null?void 0:d[0];s&&c(s)},[c]),k=a.useCallback(i=>{i.preventDefault(),i.stopPropagation()},[]),F=a.useCallback(i=>{i.preventDefault(),i.stopPropagation(),n.current&&n.current.classList.add("drag-over")},[]),P=a.useCallback(i=>{i.preventDefault(),i.stopPropagation(),n.current&&!n.current.contains(i.relatedTarget)&&n.current.classList.remove("drag-over")},[]),S=a.useCallback(i=>{i.preventDefault(),i.stopPropagation(),n.current&&n.current.classList.remove("drag-over");const d=Array.from(i.dataTransfer.files).find(u=>u.type==="image/png");d?c(d):o(u=>({...u,error:"Please drop a PNG file"}))},[c]),I=a.useCallback(i=>{const s=parseInt(i.target.value,10);o(d=>({...d,fidelity:s})),e.selectedFile&&l(e.selectedFile,s,e.whiteFill,e.useAI)},[e.selectedFile,e.whiteFill,e.useAI,l]),D=a.useCallback(i=>{const s=i.target.checked;o(d=>({...d,whiteFill:s})),e.selectedFile&&l(e.selectedFile,e.fidelity,s,e.useAI)},[e.selectedFile,e.fidelity,e.useAI,l]),R=a.useCallback(i=>{const s=i.target.checked;o(d=>({...d,useAI:s})),e.selectedFile&&l(e.selectedFile,e.fidelity,e.whiteFill,s)},[e.selectedFile,e.fidelity,e.whiteFill,l]),A=a.useCallback(()=>{var u;if(!e.result)return;const i=new Blob([e.result.svg],{type:"image/svg+xml"}),s=URL.createObjectURL(i),d=document.createElement("a");d.href=s,d.download=`${((u=e.selectedFile)==null?void 0:u.name.replace(".png",""))||"vectorized"}.svg`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(s)},[e.result,e.selectedFile]),L=a.useCallback(()=>{var m;if(!e.result)return;const i=atob(e.result.dxf),s=new Blob([i],{type:"application/dxf"}),d=URL.createObjectURL(s),u=document.createElement("a");u.href=d,u.download=`${((m=e.selectedFile)==null?void 0:m.name.replace(".png",""))||"vectorized"}.dxf`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d)},[e.result,e.selectedFile]);return r.jsxs("div",{style:t.container,children:[r.jsxs("header",{style:t.header,children:[r.jsx("h1",{style:t.title,children:"PNG2Vector"}),r.jsx("p",{style:t.subtitle,children:"AI-Assisted PNG to SVG/DXF Converter"})]}),r.jsxs("main",{style:t.main,children:[r.jsx("section",{style:t.uploadSection,children:r.jsxs("div",{ref:n,style:t.dropZone,onDragOver:k,onDragEnter:F,onDragLeave:P,onDrop:S,onClick:()=>{var i;return(i=f.current)==null?void 0:i.click()},role:"button",tabIndex:0,"aria-label":"Upload PNG file",onKeyDown:i=>{var s;(i.key==="Enter"||i.key===" ")&&((s=f.current)==null||s.click())},children:[r.jsx("input",{ref:f,type:"file",accept:"image/png",onChange:p,style:t.hiddenInput,"aria-label":"Select PNG file"}),e.selectedFile?r.jsxs("div",{style:t.fileInfo,children:[r.jsx("div",{style:t.fileName,children:e.selectedFile.name}),r.jsxs("div",{style:t.fileSize,children:[(e.selectedFile.size/1024/1024).toFixed(2)," MB"]})]}):r.jsxs("div",{style:t.uploadPrompt,children:[r.jsx("div",{style:t.uploadIcon,children:"üìÅ"}),r.jsx("div",{children:"Drop PNG file here or click to select"}),r.jsx("div",{style:t.uploadHint,children:"Maximum file size: 50MB"})]})]})}),e.selectedFile&&r.jsxs("section",{style:t.controlsSection,children:[r.jsxs("div",{style:t.controlGroup,children:[r.jsxs("label",{htmlFor:"fidelity-slider",style:t.label,children:["Fidelity: ",e.fidelity,"%"]}),r.jsx("input",{id:"fidelity-slider",type:"range",min:"0",max:"100",value:e.fidelity,onChange:I,style:t.slider,"aria-describedby":"fidelity-description"}),r.jsx("div",{id:"fidelity-description",style:t.description,children:"Higher values preserve more detail but increase file size"})]}),r.jsxs("div",{style:t.controlGroup,children:[r.jsxs("label",{style:t.checkboxLabel,children:[r.jsx("input",{type:"checkbox",checked:e.whiteFill,onChange:D,style:t.checkbox}),"White Fill"]}),r.jsx("div",{style:t.description,children:"Add white fill to shapes (VW_CLASS_Fill layer)"})]}),r.jsxs("div",{style:t.controlGroup,children:[r.jsxs("label",{style:t.checkboxLabel,children:[r.jsx("input",{type:"checkbox",checked:e.useAI,onChange:R,style:t.checkbox}),"AI Preprocessing"]}),r.jsx("div",{style:t.description,children:"Use AI edge detection for cleaner results (requires ONNX models)"})]})]}),(e.svgPreview||e.isProcessing||e.error)&&r.jsx("section",{style:t.resultsSection,children:r.jsxs("div",{style:t.resultsGrid,children:[r.jsxs("div",{style:t.previewPanel,children:[r.jsx("h3",{style:t.panelTitle,children:"SVG Preview"}),r.jsx("div",{style:t.previewContainer,children:e.isProcessing?r.jsxs("div",{style:t.loading,children:[r.jsx("div",{style:t.spinner}),r.jsx("div",{children:"Processing..."})]}):e.error?r.jsxs("div",{style:t.error,children:[r.jsx("div",{style:t.errorIcon,children:"‚ö†Ô∏è"}),r.jsx("div",{children:e.error})]}):e.svgPreview?r.jsx("div",{style:t.svgContainer,dangerouslySetInnerHTML:{__html:e.svgPreview}}):null})]}),e.result&&r.jsxs("div",{style:t.metricsPanel,children:[r.jsx("h3",{style:t.panelTitle,children:"Results"}),r.jsxs("div",{style:t.metrics,children:[r.jsxs("div",{style:t.metric,children:[r.jsx("span",{style:t.metricLabel,children:"Polygons:"}),r.jsx("span",{style:t.metricValue,children:e.result.metrics.polygonCount})]}),r.jsxs("div",{style:t.metric,children:[r.jsx("span",{style:t.metricLabel,children:"Nodes:"}),r.jsx("span",{style:t.metricValue,children:e.result.metrics.nodeCount})]}),r.jsxs("div",{style:t.metric,children:[r.jsx("span",{style:t.metricLabel,children:"Processing:"}),r.jsxs("span",{style:t.metricValue,children:[e.result.metrics.timings.total,"ms"]})]})]}),r.jsxs("div",{style:t.downloadButtons,children:[r.jsx("button",{onClick:A,style:t.downloadButton,"aria-label":"Download SVG file",children:"üìÑ Download SVG"}),r.jsx("button",{onClick:L,style:t.downloadButton,"aria-label":"Download DXF file",children:"üìê Download DXF"})]})]})]})})]}),r.jsx("footer",{style:t.footer,children:r.jsx("p",{children:"Compatible with VectorWorks, ArchiCAD, and other CAD applications. Uses deterministic vectorization with optional AI preprocessing."})})]})},t={container:{minHeight:"100vh",display:"flex",flexDirection:"column",backgroundColor:"#f8fafc"},header:{textAlign:"center",padding:"2rem 1rem",backgroundColor:"white",borderBottom:"1px solid #e2e8f0"},title:{fontSize:"2.5rem",fontWeight:"bold",color:"#1e293b",marginBottom:"0.5rem"},subtitle:{fontSize:"1.125rem",color:"#64748b"},main:{flex:1,padding:"2rem 1rem",maxWidth:"1200px",margin:"0 auto",width:"100%"},uploadSection:{marginBottom:"2rem"},dropZone:{border:"2px dashed #cbd5e1",borderRadius:"0.5rem",padding:"3rem 2rem",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:"white"},hiddenInput:{display:"none"},fileInfo:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},fileName:{fontSize:"1.125rem",fontWeight:"600",color:"#1e293b"},fileSize:{fontSize:"0.875rem",color:"#64748b"},uploadPrompt:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",color:"#64748b"},uploadIcon:{fontSize:"3rem"},uploadHint:{fontSize:"0.875rem",color:"#94a3b8"},controlsSection:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",marginBottom:"2rem",border:"1px solid #e2e8f0"},controlGroup:{marginBottom:"1.5rem"},label:{display:"block",fontSize:"1rem",fontWeight:"600",color:"#374151",marginBottom:"0.5rem"},slider:{width:"100%",height:"0.5rem",borderRadius:"0.25rem",background:"#e2e8f0",outline:"none",marginBottom:"0.5rem"},checkboxLabel:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1rem",fontWeight:"600",color:"#374151",cursor:"pointer",marginBottom:"0.5rem"},checkbox:{width:"1rem",height:"1rem"},description:{fontSize:"0.875rem",color:"#64748b"},resultsSection:{marginBottom:"2rem"},resultsGrid:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"2rem","@media (max-width: 768px)":{gridTemplateColumns:"1fr"}},previewPanel:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #e2e8f0"},panelTitle:{fontSize:"1.25rem",fontWeight:"600",color:"#1e293b",marginBottom:"1rem"},previewContainer:{minHeight:"300px",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e2e8f0",borderRadius:"0.25rem",backgroundColor:"#f8fafc"},loading:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",color:"#64748b"},spinner:{width:"2rem",height:"2rem",border:"2px solid #e2e8f0",borderTop:"2px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"},error:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",color:"#dc2626",textAlign:"center"},errorIcon:{fontSize:"2rem"},svgContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},metricsPanel:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #e2e8f0",height:"fit-content"},metrics:{marginBottom:"1.5rem"},metric:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0",borderBottom:"1px solid #f1f5f9"},metricLabel:{color:"#64748b",fontSize:"0.875rem"},metricValue:{color:"#1e293b",fontWeight:"600"},downloadButtons:{display:"flex",flexDirection:"column",gap:"0.75rem"},downloadButton:{padding:"0.75rem 1rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background-color 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},footer:{textAlign:"center",padding:"2rem 1rem",backgroundColor:"white",borderTop:"1px solid #e2e8f0",color:"#64748b",fontSize:"0.875rem"}},C=document.getElementById("root");if(!C)throw new Error("Failed to find the root element");x.createRoot(C).render(r.jsx(z.StrictMode,{children:r.jsx(W,{})}));
//# sourceMappingURL=index-COY11P12.js.map
